<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental Clinic Search - London</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .search-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .search-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .search-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-group {
            display: flex;
            flex-direction: column;
        }

        .search-group label {
            color: #666;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .search-input, .search-select {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .search-input:focus, .search-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .filters-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .filter-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .filter-group h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-checkbox:hover {
            border-color: #667eea;
        }

        .filter-checkbox input {
            margin-right: 8px;
            cursor: pointer;
        }

        .filter-checkbox label {
            cursor: pointer;
            color: #333;
            font-size: 0.9em;
        }

        .filter-checkbox input:checked + label {
            color: #667eea;
            font-weight: 600;
        }

        .filter-checkbox:has(input:checked) {
            background: #667eea;
            border-color: #667eea;
        }

        .filter-checkbox:has(input:checked) label {
            color: white;
        }

        .search-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
            width: 100%;
        }

        .search-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .results-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .results-header h2 {
            color: #667eea;
            font-size: 1.8em;
        }

        .results-count {
            color: #666;
            font-size: 1.1em;
        }

        .sort-options {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .sort-options label {
            color: #666;
            margin-right: 10px;
        }

        .sort-select {
            padding: 8px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9em;
        }

        .clinic-result {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            position: relative;
        }

        .clinic-result:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .match-score {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .match-score.high {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .match-score.medium {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .match-score.low {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .clinic-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .clinic-name {
            font-size: 1.5em;
            color: #333;
            font-weight: bold;
            margin-right: 150px;
        }

        .clinic-info {
            color: #666;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .clinic-info svg {
            width: 18px;
            height: 18px;
            margin-right: 8px;
            fill: #667eea;
        }

        .services-languages {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .services, .languages {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .services h3, .languages h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .tag {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            margin: 5px 5px 5px 0;
            font-size: 0.9em;
        }

        .tag.language {
            background: #764ba2;
        }

        .tag.matched {
            background: #11998e;
            font-weight: 600;
        }

        .no-results {
            text-align: center;
            padding: 50px;
            color: #666;
            font-size: 1.2em;
        }

        .match-details {
            margin-top: 10px;
            padding: 10px;
            background: #f0f4ff;
            border-radius: 5px;
            font-size: 0.9em;
            color: #555;
        }

        @media (max-width: 768px) {
            .search-row {
                grid-template-columns: 1fr;
            }
            
            .filters-section {
                grid-template-columns: 1fr;
            }
            
            .services-languages {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Dental Clinic Search</h1>
            <p>Find the perfect dental clinic in London based on services and languages</p>
        </div>

        <div class="search-section">
            <h2>Search Criteria</h2>
            <div class="search-row">
                <div class="search-group">
                    <label for="search-text">Search by Name or Address</label>
                    <input type="text" id="search-text" class="search-input" placeholder="Enter clinic name or address...">
                </div>
                <div class="search-group">
                    <label for="area-filter">Area/Borough</label>
                    <input type="text" id="area-filter" class="search-input" placeholder="e.g., Westminster, Camden...">
                </div>
                <div class="search-group">
                    <label for="postcode-filter">Postcode</label>
                    <input type="text" id="postcode-filter" class="search-input" placeholder="e.g., W1, NW1, SW1...">
                </div>
            </div>

            <div class="search-row">
                <div class="search-group">
                    <label for="sort-by">Sort By</label>
                    <select id="sort-by" class="search-select">
                        <option value="match">Match Score (Best First)</option>
                        <option value="name">Name (A-Z)</option>
                        <option value="services">Number of Services</option>
                        <option value="rating">Rating (Highest First)</option>
                    </select>
                </div>
                <div class="search-group">
                    <label for="min-score">Min Match Score</label>
                    <select id="min-score" class="search-select">
                        <option value="0">Any Score</option>
                        <option value="30">30%+</option>
                        <option value="50">50%+</option>
                        <option value="70">70%+</option>
                        <option value="90">90%+</option>
                    </select>
                </div>
                <div class="search-group">
                    <label for="min-rating">Min Rating</label>
                    <select id="min-rating" class="search-select">
                        <option value="0">Any Rating</option>
                        <option value="3">3.0+</option>
                        <option value="3.5">3.5+</option>
                        <option value="4">4.0+</option>
                        <option value="4.5">4.5+</option>
                    </select>
                </div>
            </div>

            <div class="filters-section">
                <div class="filter-group">
                    <h3>Services Required</h3>
                    <div class="filter-options" id="services-filter">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                <div class="filter-group">
                    <h3>Languages Spoken</h3>
                    <div class="filter-options" id="languages-filter">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="filters-section">
                <div class="filter-group">
                    <h3>Clinic Type & Features</h3>
                    <div class="filter-options">
                        <div class="filter-checkbox">
                            <input type="checkbox" id="nhs-accepting" value="nhs">
                            <label for="nhs-accepting">NHS Accepting</label>
                        </div>
                        <div class="filter-checkbox">
                            <input type="checkbox" id="private" value="private">
                            <label for="private">Private</label>
                        </div>
                        <div class="filter-checkbox">
                            <input type="checkbox" id="emergency" value="emergency">
                            <label for="emergency">Emergency Services</label>
                        </div>
                        <div class="filter-checkbox">
                            <input type="checkbox" id="children" value="children">
                            <label for="children">Children/Pediatric</label>
                        </div>
                    </div>
                </div>
                <div class="filter-group">
                    <h3>Accessibility & Facilities</h3>
                    <div class="filter-options">
                        <div class="filter-checkbox">
                            <input type="checkbox" id="wheelchair" value="wheelchair">
                            <label for="wheelchair">Wheelchair Access</label>
                        </div>
                        <div class="filter-checkbox">
                            <input type="checkbox" id="parking" value="parking">
                            <label for="parking">Parking Available</label>
                        </div>
                    </div>
                </div>
            </div>

            <button class="search-button" onclick="performSearch()">üîç Search Clinics</button>
        </div>

        <div class="results-section" id="results-section" style="display: none;">
            <div class="results-header">
                <div>
                    <h2>Search Results</h2>
                    <div class="results-count" id="results-count"></div>
                </div>
            </div>
            <div id="results-container"></div>
        </div>
    </div>

    <script>
        const API_BASE = window.location.origin;
        let clinicsData = [];
        let allServices = new Set();
        let allLanguages = new Set();
        let metadata = {};

        // Load data and initialize
        async function loadData() {
            try {
                // Try to load from API first, fallback to JSON file
                try {
                    const [servicesRes, languagesRes, metadataRes] = await Promise.all([
                        fetch(`${API_BASE}/api/services`),
                        fetch(`${API_BASE}/api/languages`),
                        fetch(`${API_BASE}/api/metadata`)
                    ]);
                    
                    if (servicesRes.ok && languagesRes.ok) {
                        const services = await servicesRes.json();
                        const languages = await languagesRes.json();
                        allServices = new Set(services);
                        allLanguages = new Set(languages);
                        
                        if (metadataRes.ok) {
                            metadata = await metadataRes.json();
                            updateLastUpdated(metadata.last_updated);
                        }
                        
                        populateFilters();
                        return;
                    }
                } catch (apiError) {
                    console.log('API not available, trying JSON file...', apiError);
                }
                
                // Fallback to JSON file
                const response = await fetch('dental_clinics_london.json');
                clinicsData = await response.json();
                
                // Collect all unique services and languages
                clinicsData.forEach(clinic => {
                    clinic.services?.forEach(s => allServices.add(s));
                    clinic.languages?.forEach(l => allLanguages.add(l));
                });

                populateFilters();
            } catch (error) {
                console.error('Error loading data:', error);
                alert('Error loading data. Please ensure the API server is running or the JSON file exists.');
            }
        }
        
        function updateLastUpdated(timestamp) {
            if (timestamp) {
                const date = new Date(timestamp);
                const header = document.querySelector('.header p');
                if (header) {
                    header.innerHTML += `<br><small style="color: #999;">Last updated: ${date.toLocaleString()}</small>`;
                }
            }
        }

        function populateFilters() {
            const servicesContainer = document.getElementById('services-filter');
            const languagesContainer = document.getElementById('languages-filter');

            // Populate services
            Array.from(allServices).sort().forEach(service => {
                const checkbox = document.createElement('div');
                checkbox.className = 'filter-checkbox';
                checkbox.innerHTML = `
                    <input type="checkbox" id="service-${service}" value="${service}">
                    <label for="service-${service}">${service}</label>
                `;
                servicesContainer.appendChild(checkbox);
            });

            // Populate languages
            Array.from(allLanguages).sort().forEach(language => {
                const checkbox = document.createElement('div');
                checkbox.className = 'filter-checkbox';
                checkbox.innerHTML = `
                    <input type="checkbox" id="lang-${language}" value="${language}">
                    <label for="lang-${language}">${language}</label>
                `;
                languagesContainer.appendChild(checkbox);
            });
        }

        function calculateMatchScore(clinic, searchText, selectedServices, selectedLanguages) {
            let score = 0;
            let maxScore = 100;
            let matchDetails = [];

            // Text search (30 points)
            if (searchText) {
                const text = searchText.toLowerCase();
                const nameMatch = clinic.name?.toLowerCase().includes(text);
                const addressMatch = clinic.address?.toLowerCase().includes(text);
                
                if (nameMatch) {
                    score += 20;
                    matchDetails.push('Name matches');
                }
                if (addressMatch) {
                    score += 10;
                    matchDetails.push('Address matches');
                }
            } else {
                maxScore -= 30;
            }

            // Services match (40 points)
            if (selectedServices.length > 0) {
                const clinicServices = clinic.services || [];
                const matchedServices = selectedServices.filter(s => 
                    clinicServices.some(cs => cs.toLowerCase() === s.toLowerCase())
                );
                const serviceScore = (matchedServices.length / selectedServices.length) * 40;
                score += serviceScore;
                
                if (matchedServices.length > 0) {
                    matchDetails.push(`${matchedServices.length}/${selectedServices.length} services matched`);
                }
            } else {
                maxScore -= 40;
            }

            // Languages match (30 points)
            if (selectedLanguages.length > 0) {
                const clinicLanguages = clinic.languages || [];
                const matchedLanguages = selectedLanguages.filter(l => 
                    clinicLanguages.some(cl => cl.toLowerCase() === l.toLowerCase())
                );
                const languageScore = (matchedLanguages.length / selectedLanguages.length) * 30;
                score += languageScore;
                
                if (matchedLanguages.length > 0) {
                    matchDetails.push(`${matchedLanguages.length}/${selectedLanguages.length} languages matched`);
                }
            } else {
                maxScore -= 30;
            }

            // Normalize score to percentage
            const percentage = maxScore > 0 ? Math.round((score / maxScore) * 100) : 100;
            
            return {
                score: percentage,
                details: matchDetails,
                matchedServices: selectedServices.filter(s => 
                    (clinic.services || []).some(cs => cs.toLowerCase() === s.toLowerCase())
                ),
                matchedLanguages: selectedLanguages.filter(l => 
                    (clinic.languages || []).some(cl => cl.toLowerCase() === l.toLowerCase())
                )
            };
        }

        function getScoreClass(score) {
            if (score >= 70) return 'high';
            if (score >= 40) return 'medium';
            return 'low';
        }

        async function performSearch() {
            const searchText = document.getElementById('search-text').value.trim();
            const areaFilter = document.getElementById('area-filter').value.trim();
            const postcodeFilter = document.getElementById('postcode-filter').value.trim();
            const sortBy = document.getElementById('sort-by').value;
            const minScore = parseInt(document.getElementById('min-score').value);
            const minRating = parseFloat(document.getElementById('min-rating').value);

            // Get selected services
            const selectedServices = Array.from(document.querySelectorAll('#services-filter input:checked'))
                .map(cb => cb.value);

            // Get selected languages
            const selectedLanguages = Array.from(document.querySelectorAll('#languages-filter input:checked'))
                .map(cb => cb.value);

            // Get feature filters
            const filters = {
                area: areaFilter,
                postcode: postcodeFilter,
                nhs: document.getElementById('nhs-accepting').checked,
                private: document.getElementById('private').checked,
                emergency: document.getElementById('emergency').checked,
                children: document.getElementById('children').checked,
                wheelchair: document.getElementById('wheelchair').checked,
                parking: document.getElementById('parking').checked
            };

            // Try API first, fallback to client-side search
            try {
                const searchRequest = {
                    search_text: searchText || null,
                    area: areaFilter || null,
                    postcode: postcodeFilter || null,
                    services: selectedServices,
                    languages: selectedLanguages,
                    nhs: filters.nhs || null,
                    private: filters.private || null,
                    emergency: filters.emergency || null,
                    children: filters.children || null,
                    wheelchair: filters.wheelchair || null,
                    parking: filters.parking || null,
                    min_rating: minRating > 0 ? minRating : null,
                    min_score: minScore,
                    sort_by: sortBy
                };

                const response = await fetch(`${API_BASE}/api/search`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(searchRequest)
                });

                if (response.ok) {
                    const results = await response.json();
                    // Transform API response to match expected format
                    const transformed = results.map(r => ({
                        clinic: r.clinic,
                        match: r.match
                    }));
                    displayResults(transformed);
                    return;
                }
            } catch (apiError) {
                console.log('API search failed, using client-side search...', apiError);
            }

            // Fallback to client-side search
            if (clinicsData.length === 0) {
                alert('No data available. Please load data first.');
                return;
            }

            const results = clinicsData.map(clinic => {
                // Apply basic filters first
                if (filters.nhs && !clinic.nhs) return null;
                if (filters.private && !clinic.private) return null;
                if (filters.emergency && !clinic.emergency) return null;
                if (filters.children && !clinic.children) return null;
                if (filters.wheelchair && !clinic.wheelchair_access) return null;
                if (filters.parking && !clinic.parking) return null;
                if (minRating > 0 && (!clinic.rating || clinic.rating < minRating)) return null;

                const match = calculateMatchScore(clinic, searchText, selectedServices, selectedLanguages, filters);
                return {
                    clinic,
                    match
                };
            }).filter(r => r !== null);

            // Filter by minimum score
            const filtered = results.filter(r => r.match.score >= minScore);

            // Sort results
            if (sortBy === 'match') {
                filtered.sort((a, b) => b.match.score - a.match.score);
            } else if (sortBy === 'name') {
                filtered.sort((a, b) => a.clinic.name.localeCompare(b.clinic.name));
            } else if (sortBy === 'services') {
                filtered.sort((a, b) => (b.clinic.services?.length || 0) - (a.clinic.services?.length || 0));
            } else if (sortBy === 'rating') {
                filtered.sort((a, b) => (b.clinic.rating || 0) - (a.clinic.rating || 0));
            }

            displayResults(filtered);
        }

        function displayResults(results) {
            const container = document.getElementById('results-container');
            const section = document.getElementById('results-section');
            const countElement = document.getElementById('results-count');

            section.style.display = 'block';
            countElement.textContent = `Found ${results.length} clinic${results.length !== 1 ? 's' : ''}`;

            if (results.length === 0) {
                container.innerHTML = '<div class="no-results">No clinics match your search criteria. Try adjusting your filters.</div>';
                return;
            }

            container.innerHTML = '';

            results.forEach(result => {
                const { clinic, match } = result;
                const scoreClass = getScoreClass(match.score);

                const servicesHTML = (clinic.services || []).map(s => {
                    const isMatched = match.matchedServices.some(ms => ms.toLowerCase() === s.toLowerCase());
                    return `<span class="tag ${isMatched ? 'matched' : ''}">${s}</span>`;
                }).join('') || '<span style="color: #999;">No services listed</span>';

                const languagesHTML = (clinic.languages || []).map(l => {
                    const isMatched = match.matchedLanguages.some(ml => ml.toLowerCase() === l.toLowerCase());
                    return `<span class="tag language ${isMatched ? 'matched' : ''}">${l}</span>`;
                }).join('') || '<span style="color: #999;">No languages listed</span>';

                const card = document.createElement('div');
                card.className = 'clinic-result';
                
                // Build features badges
                const features = [];
                if (clinic.nhs) features.push('NHS');
                if (clinic.private) features.push('Private');
                if (clinic.emergency) features.push('Emergency');
                if (clinic.children) features.push('Children');
                if (clinic.wheelchair_access) features.push('Wheelchair Access');
                if (clinic.parking) features.push('Parking');
                
                const featuresHTML = features.length > 0 
                    ? `<div style="margin-top: 10px; margin-bottom: 10px;">
                        ${features.map(f => `<span style="display: inline-block; background: #e0e0e0; color: #333; padding: 4px 10px; border-radius: 12px; margin-right: 5px; font-size: 0.85em;">${f}</span>`).join('')}
                       </div>`
                    : '';

                const ratingHTML = clinic.rating 
                    ? `<div style="display: inline-block; margin-left: 10px; color: #f39c12; font-weight: bold;">
                        ‚≠ê ${clinic.rating}/5.0
                       </div>`
                    : '';

                const openingHoursHTML = clinic.opening_hours
                    ? `<div class="clinic-info">
                        <svg viewBox="0 0 24 24" style="fill: #667eea;"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
                        ${clinic.opening_hours}
                       </div>`
                    : '';

                card.innerHTML = `
                    <div class="match-score ${scoreClass}">${match.score}% Match</div>
                    <div class="clinic-header">
                        <div class="clinic-name">
                            ${clinic.name || 'Unknown Clinic'}
                            ${ratingHTML}
                        </div>
                    </div>
                    ${featuresHTML}
                    ${clinic.address ? `
                        <div class="clinic-info">
                            <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                            ${clinic.address}
                        </div>
                    ` : ''}
                    ${clinic.phone ? `
                        <div class="clinic-info">
                            <svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
                            ${clinic.phone}
                        </div>
                    ` : ''}
                    ${openingHoursHTML}
                    ${clinic.link ? `
                        <div class="clinic-info">
                            <svg viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
                            <a href="${clinic.link}" target="_blank" style="color: #667eea;">Visit Website</a>
                        </div>
                    ` : ''}
                    ${clinic.area ? `
                        <div class="clinic-info">
                            <svg viewBox="0 0 24 24" style="fill: #667eea;"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                            Area: ${clinic.area}${clinic.postcode ? ` (${clinic.postcode})` : ''}
                        </div>
                    ` : ''}
                    ${match.details.length > 0 ? `
                        <div class="match-details">
                            <strong>Match Details:</strong> ${match.details.join(' ‚Ä¢ ')}
                        </div>
                    ` : ''}
                    <div class="services-languages">
                        <div class="services">
                            <h3>Services Provided</h3>
                            <div>${servicesHTML}</div>
                        </div>
                        <div class="languages">
                            <h3>Languages Spoken</h3>
                            <div>${languagesHTML}</div>
                        </div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // Allow Enter key to trigger search
        document.getElementById('search-text').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // Load data on page load
        loadData();
    </script>
</body>
</html>

